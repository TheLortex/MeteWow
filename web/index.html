<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Un titre</title>

        <link type="text/css" rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/3.0.0/css/bootstrap.min.css" />
        <link type="text/css" rel="stylesheet" href="main.css" />
        <link type="text/css" rel="stylesheet" href="tile.css" />
        
            <script type="text/javascript" src="//code.jquery.com/jquery-2.0.3.js"></script>
            <script type="text/javascript" src="//code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
            <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
            <script type="text/javascript" src="jquery.shapeshift.min.js"></script>
            <script type="text/javascript">

            </script>
            <style type="text/css">
            .container {
                position: relative;
                width: 95%;
                padding-top: 10px;
            }
            
            .container > article {
                position: absolute;
            }
            
            .container .ss-placeholder-child {
                background: rgba(0,0,0,0.03);
                border: 1px dashed rgba(0,0,0,0.15);
            }</style>
    </head>
    <body>

        <!--  L'UI. -->

        <div id="content">
            <nav id="sidebar">
                <h2 onclick="toggleShowMenu();">MENU</h2>
                <ul id="list_nav">
                    <li>Dashboard</li>
                    <li>Graphiques</li>
                    <li>Paramètres</li>
                </ul>
            </nav>
            <div id="main">
                <div id="cheval">
                    <h2>Phrase récapitulative.</h2>
                    <nav>
                        <select id="metewow_server" name="metewow_server">
                            <option value="id_1">MTW_00456 (Eaubonne)</option>
                            <option value="id_2">MTW_01248 (Mont Saint-Michel)</option>
                            <option value="id_3">MTW_01337 (Océan Atlantique)</option>
                            <option value="id_4">MTW_02242 (Position indéterminée)</option>
                        </select>
                    </nav>
                    <div style="clear:both;"></div>
                </div>
                <div id="tileset" class="container">
                    <article data-id=0>
                        <div>
                            <h3>Une donnée.</h3>
                            <p>Lorem ipsum</p>
                        </div>
                    </article>
                    <article data-id=1>
                        <div>
                        <h3>Une autre donnée.</h3>
                        <p>Dolor sit amet.</p>
                        </div>
                    </article>
                    <article data-id=2>
                        <div>
                        <h3>Température</h3>
                        <p> 42°F</p>
                        </div>
                    </article>
                    <article data-id=3>
                        <div>
                        <h3>Humidité</h3>
                        <p> 103%</p>
                        </div>
                    </article>
                    <article data-ss-colspan="2" data-id=4>
                        <div>
                        <h3>Pression</h3>
                        <p> Un bon bar et deux saumons.</p>
                        </div>
                    </article>
                    <article id="test" data-id=5>
                        <div>
                        <h3>Vent</h3>
                        <p> Tornade en cours.</p>
                        </div>
                    </article>
                    <article data-ss-colspan="2" data-ss-rowspan="2" data-id=6>
                        <div>
                        <h3>Caméra</h3>
                        <p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/---------\&nbsp;____<br />
                        |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;___|/&nbsp;&nbsp; <br />
                        |__/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                        __/   (un chalet en Normandie)
                        </p>
                        </div>
                    </article>
                    <article data-id=7>
                        <div>
                        <h3>Alertes</h3>
                        <p> Une baleine s'est échouée.</p>
                        </div>
                    </article>
                </div>
            </div>
            <div style="clear:both;"></div>
        </div>
        
        <!-- Menu contextuel pour les tiles -->
        
        <div class="hide" id="rmenu">
            <ul>
                <li onclick="setDimensions(1,1); return false;">1x1</li>
                <li onclick="setDimensions(2,1); return false;">2x1</li>
                <li onclick="setDimensions(1,2); return false;">1x2</li>
                <li onclick="setDimensions(2,2); return false;">2x2</li>
            </ul>
        </div>


        <!--  Le lock screen. -->

        <div id="locker" style="display:block">
            <div class="cLock draggable">
               <div class="cLock_2 draggable">
                  <h1 class="draggable">Il fait beau.<sub style="font-size:0.2em">(1)</sub></h1>
               </div>
            </div>
            <p style="position: absolute; bottom: 50px; margin-left: 10px;">(1) Cette vérité générale est générale. <sub style="font-size:0.6em">(2)</sub><br />
                (2) Sauf en cas de chutes d'eau, telle que la pluie.
            </p>
            <div id="databar" class="draggable">
                <div class="row hidden-xs" >
                    <span class="col-lg-4 draggable"><strong>42</strong> serveurs MétéWow connectés.</span>
                    <span class="col-lg-4 draggable">Dernière mise à jour il y a <strong>42 secondes</strong>.</span>
                    <span class="col-lg-4 draggable"><strong>Aucune</strong> alerte.</span>
                </div>
                <div class="carousel slide visible-xs">
                      <div class="carousel-inner">
                        <div class="item active draggable">
                            <p><strong>42</strong> serveurs MétéWow connectés.</p>
                        </div>
                        <div class="item draggable">
                            <p>Dernière mise à jour il y a <strong>42 secondes</strong>.</p>
                        </div>
                        <div class="item draggable">
                            <p><strong>Aucune</strong> alerte.</p>
                        </div>
                      </div>
                </div>
            </div>
        </div>

  
        <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        
        <script type="text/javascript">
        
         $(window).load(function(){
            var container = document.getElementById("tileset");
            var nodes = container.getElementsByTagName('article');
            var sortList = [];
            var l = nodes.length;
            for(var i=0;i<l;i++) {
                $(nodes[0]).attr("data-ss-colspan",parseInt(localStorage.getItem("col-"+i),10));
                $(nodes[0]).attr("data-ss-rowspan",parseInt(localStorage.getItem("row-"+i),10));
                
                sortList.push(nodes[0]); 
                container.removeChild(nodes[0]);
            }
            
            for(var i=0;i<l;i++) {
                var itemAtIndex = parseInt(localStorage.getItem(i) || (i+""),10);
                container.appendChild(sortList[itemAtIndex]); 
            }
             
            $(".container").shapeshift({
                gutterX: -1, // Compensate for div border
                gutterY: -1, // Compensate for div border
                paddingX: 0,
                paddingY: 0,
                minColumns: 3
            });
        });
        
        $(".container").on("ss-rearranged", function(e, selected) {
           $('.container').children().each(function() {
              localStorage.setItem($(this).index(), $(this).data("id"));
            });
        });
        </script>
        <script type="text/javascript" src="main.js"> </script>
        <script type="text/javascript" src="rmenu.js"> </script>
    </body>
</html>
